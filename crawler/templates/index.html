{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<title>{% block title %}Overview{% endblock %}</title>
	<meta content='width=device-width, initial-scale=1.0, shrink-to-fit=no' name='viewport' />
	<link rel="icon" href="{% static 'img/icon.ico' %}" type="image/x-icon"/>

	<!-- Fonts and icons -->
	<script src="{% static 'js/plugin/webfont/webfont.min.js' %}"></script>
	<script src="{% static 'js/plugin/taggle.js/example/js/jquery-1.10.1.js' %}"></script>
	<script src="{% static 'js/plugin/taggle.js/example/js/jquery-ui.js' %}"></script>
	<script src="{% static 'js/plugin/taggle.js/example/js/rainbow-custom.min.js' %}"></script>
	<link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.19/themes/redmond/jquery-ui.css">
	<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.19/i18n/jquery-ui-i18n.min.js"></script>
	<script>
		WebFont.load({
			google: {"families":["Open+Sans:300,400,600,700"]},
			custom: {"families":["Flaticon", "Font Awesome 5 Solid", "Font Awesome 5 Regular", "Font Awesome 5 Brands"], urls: ['{% static "css/fonts.css" %}']},
			active: function() {
				sessionStorage.fonts = true;
			}
		});
	</script>

	<!-- CSS Files -->
	<!--link rel="stylesheet" href="{% static '/css/bootstrap.min.css' %}"-->
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
	<link href="https://gitcdn.github.io/bootstrap-toggle/2.2.2/css/bootstrap-toggle.min.css" rel="stylesheet">
	<script src="https://gitcdn.github.io/bootstrap-toggle/2.2.2/js/bootstrap-toggle.min.js"></script>
	<link rel="stylesheet" href="{% static '/css/azzara.min.css' %}">

	<!-- CSS Just for demo purpose, don't include it in your project -->
	<link rel="stylesheet" href="{% static '/css/demo.css' %}">
	<link rel="stylesheet" type="text/css" href="{% static 'js/plugin/taggle.js/example/css/projects.min.css' %}">
	<link rel="stylesheet" type="text/css" href="{% static 'js/plugin/taggle.js/example/css/taggle.css' %}">
	<style>
		.more {display: none;}
		.pdfobject-container { height: 50rem; border: 0rem solid rgba(0,0,0,.1); }
	</style>
	{% block css %}
	{% endblock %}
</head>
<body>
	<div class="wrapper">
		<!--
			Tip 1: You can change the background color of the main header using: data-background-color="blue | purple | light-blue | green | orange | red"
		-->
		{% include 'header.html' %}
		<!-- Sidebar -->
	  	{% include 'sidebar.html' %}	
		<div class="main-panel">
			<div class="content">
				{% block content %}
				<div class="page-inner">
					<div class="row">
						<div class="col-sm-6 col-md-3">
							<div class="card card-stats card-round">
								<div class="card-body ">
									<div class="row align-items-center">
										<div class="col-icon">
											<div class="icon-big text-center icon-primary bubble-shadow-small">
												<i class="fas fa-users"></i>
											</div>
										</div>
										<div class="col col-stats ml-3 ml-sm-0">
											<div class="numbers">
												<p class="card-category">Unique authors</p>
												<h4 class="card-title">{{ authors|length }}</h4>
												<p class="card-category">Authors in largest CC</p>
												<h4 class="card-title">2563</h4>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
						<div class="col-sm-6 col-md-3">
							<div class="card card-stats card-round">
								<div class="card-body">
									<div class="row align-items-center">
										<div class="col-icon">
											<div class="icon-big text-center icon-secondary bubble-shadow-small">
												<i class="far fa-check-circle"></i>
											</div>
										</div>
										<div class="col col-stats ml-3 ml-sm-0">
											<div class="numbers">
												<p class="card-category">Papers</p>
												<h4 class="card-title">{{ papers|length }}</h4>
												<p class="card-category">Papers in largest CC</p>
												<h4 class="card-title">838</h4>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
					<div class="row">
						<div class="col-md-6">
							<div class="card">
								<div class="card-header">
									<div class="card-head-row">
										<div class="card-title">Collaboration between Authors</div>
										<div class="card-tools">
											<!--<a href="#" class="btn btn-info btn-border btn-round btn-sm mr-2">
												<span class="btn-label">
													<i class="fa fa-pencil"></i>
												</span>
												Export
											</a>
											<a href="#" class="btn btn-info btn-border btn-round btn-sm">
												<span class="btn-label">
													<i class="fa fa-print"></i>
												</span>
												Print
											</a>-->
										</div>
									</div>
								</div>
								<div class="card-body">
									<div class="chart-container" style="min-height: 375px">
										<!--<canvas id="statisticsChart"></canvas>-->
										<iframe width="500" height=500" frameborder="0" scrolling="no" src="//plot.ly/~marxen68/4.embed"></iframe>
									</div>
									<div id="myChartLegend"></div>
								</div>
							</div>
						</div>
						<div class="col-md-6">
							<div class="card">
								<div class="card-header">
									<div class="card-head-row">
										<div class="card-title">Topics</div>
										<div class="card-tools">
											<!--<a href="#" class="btn btn-info btn-border btn-round btn-sm mr-2">
												<span class="btn-label">
													<i class="fa fa-pencil"></i>
												</span>
												Export
											</a>
											<a href="#" class="btn btn-info btn-border btn-round btn-sm">
												<span class="btn-label">
													<i class="fa fa-print"></i>
												</span>
												Print
											</a>-->
										</div>
									</div>
								</div>
								<div class="card-body">
									<div class="chart-container" style="min-height: 375px">
										<img src="{% static 'img/alice.png' %}" width=500 />
									</div>
									<div id="myChartLegend"></div>
								</div>
							</div>
						</div>
					</div>
					<div class="row">
						<div class="col-md-12">
							<div class="card">
								<div class="card-header">
									<h4 class="card-title">Papers</h4>
								</div>
								<div class="card-body">
									<div class="table-responsive">
										<table id="basic-datatables" class="display table table-striped table-hover" >
											<thead>
												<tr>
													<th>Title</th>
													<th>Authors</th>
													<th>Link</th>
												</tr>
											</thead>
											<tfoot>
												<tr>
													<th>Title</th>
													<th>Authors</th>
													<th>Link</th>
												</tr>
											</tfoot>
											<tbody>
												{% for paper in papers %}
												{% if paper.centred %}
												<tr>
													<td><h4 class="card-title">{{ paper.title }}</h4>
														<span id="dots-{{paper.id}}"></span>
														<span id="more-{{paper.id}}" class="more">
															<p>{{ paper.abstract }}</p></span>
														<button onclick="myFunction({{paper.id}})" id="abs{{paper.id}}" class="btn-info btn-border btn-round btn-sm mr-2">Read abstract</button>
													</td>
													<td><p>{% for a in paper.authors.all %}
														<b>{{a.name}}</b> 
														{% endfor %}</p>
													</td>
													<td><a href="http://openaccess.thecvf.com/{{paper.pdf_link}}" target="_blank">CVF</a></td>
												</tr>
												{% endif %}
												{% endfor %}
											</tbody>
										</table>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
				{% endblock %}
			</div>			
		</div>
		
		<!-- Custom template | don't include it in your project! 
		<div class="custom-template">
			<div class="title">Settings</div>
			<div class="custom-content">
				<div class="switcher">
					<div class="switch-block">
						<h4>Topbar</h4>
						<div class="btnSwitch">
							<button type="button" class="changeMainHeaderColor" data-color="blue"></button>
							<button type="button" class="selected changeMainHeaderColor" data-color="purple"></button>
							<button type="button" class="changeMainHeaderColor" data-color="light-blue"></button>
							<button type="button" class="changeMainHeaderColor" data-color="green"></button>
							<button type="button" class="changeMainHeaderColor" data-color="orange"></button>
							<button type="button" class="changeMainHeaderColor" data-color="red"></button>
						</div>
					</div>
					<div class="switch-block">
						<h4>Background</h4>
						<div class="btnSwitch">
							<button type="button" class="changeBackgroundColor" data-color="bg2"></button>
							<button type="button" class="changeBackgroundColor selected" data-color="bg1"></button>
							<button type="button" class="changeBackgroundColor" data-color="bg3"></button>
						</div>
					</div>
				</div>
			</div>
			<div class="custom-toggle">
				<i class="flaticon-settings"></i>
			</div>
		</div>-->
		<!-- End Custom template -->
	</div>
</div>
<!--   Core JS Files   -->
<!--script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.14/jquery-ui.min.js"></script-->
<!--script src="{% static '/js/core/jquery.3.2.1.min.js' %}"></script-->
<script src="{% static '/js/core/popper.min.js' %}"></script>
<!--script src="{% static '/js/core/bootstrap.min.js' %}"></script-->

<!-- jQuery UI -->
<!--script src="{% static '/js/plugin/jquery-ui-1.12.1.custom/jquery-ui.min.js' %}"></script-->
<script src="{% static '/js/plugin/jquery-ui-touch-punch/jquery.ui.touch-punch.min.js' %}"></script>

<!-- jQuery Scrollbar -->
<script src="{% static '/js/plugin/jquery-scrollbar/jquery.scrollbar.min.js' %}"></script>

<!-- Moment JS -->
<script src="{% static '/js/plugin/moment/moment.min.js' %}"></script>

<!-- Chart JS -->
<script src="{% static '/js/plugin/chart.js/chart.min.js' %}"></script>

<!-- jQuery Sparkline -->
<script src="{% static '/js/plugin/jquery.sparkline/jquery.sparkline.min.js' %}"></script>

<!-- Chart Circle -->
<script src="{% static '/js/plugin/chart-circle/circles.min.js' %}"></script>

<!-- Datatables -->
<script src="{% static '/js/plugin/datatables/datatables.min.js' %}"></script>

<!-- Bootstrap Notify -->
<script src="{% static '/js/plugin/bootstrap-notify/bootstrap-notify.min.js' %}"></script>

<!-- jQuery Vector Maps -->
<script src="{% static '/js/plugin/jqvmap/jquery.vmap.min.js' %}"></script>
<script src="{% static '/js/plugin/jqvmap/maps/jquery.vmap.world.js' %}"></script>

<!-- Google Maps Plugin -->
<script src="{% static '/js/plugin/gmaps/gmaps.js' %}"></script>

<!-- Sweet Alert -->
<script src="{% static '/js/plugin/sweetalert/sweetalert.min.js' %}"></script>

<!-- Azzara JS -->
<script src="{% static '/js/ready.js' %}"></script>

<!-- PDF.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.js"></script>

{% block js %}
<script >
		$(document).ready(function() {
			$('#basic-datatables').DataTable({
			});

			$('#multi-filter-select').DataTable( {
				"pageLength": 5,
				initComplete: function () {
					this.api().columns().every( function () {
						var column = this;
						var select = $('<select class="form-control"><option value=""></option></select>')
						.appendTo( $(column.footer()).empty() )
						.on( 'change', function () {
							var val = $.fn.dataTable.util.escapeRegex(
								$(this).val()
								);

							column
							.search( val ? '^'+val+'$' : '', true, false )
							.draw();
						} );

						column.data().unique().sort().each( function ( d, j ) {
							select.append( '<option value="'+d+'">'+d+'</option>' )
						} );
					} );
				}
			});

			// Add Row
			$('#add-row').DataTable({
				"pageLength": 5,
			});

			var action = '<td> <div class="form-button-action"> <button type="button" data-toggle="tooltip" title="" class="btn btn-link btn-primary btn-lg" data-original-title="Edit Task"> <i class="fa fa-edit"></i> </button> <button type="button" data-toggle="tooltip" title="" class="btn btn-link btn-danger" data-original-title="Remove"> <i class="fa fa-times"></i> </button> </div> </td>';

			$('#addRowButton').click(function() {
				$('#add-row').dataTable().fnAddData([
					$("#addName").val(),
					$("#addPosition").val(),
					$("#addOffice").val(),
					action
					]);
				$('#addRowModal').modal('hide');

			});
		});
		function myFunction(id) {
  			var dots = document.getElementById("dots-"+id);
  			var moreText = document.getElementById("more-"+id);
  			var btnText = document.getElementById("abs"+id);

  			if (dots.style.display === "none") {
   				dots.style.display = "inline";
   	 			btnText.innerHTML = "Read abstract"; 
    				moreText.style.display = "none";
  			} else {
    				dots.style.display = "none";
    				btnText.innerHTML = "Close abstract"; 
    				moreText.style.display = "inline";
  			}
		}
	</script>
{% endblock %}

<!-- Azzara DEMO methods, don't include it in your project! -->
<!--<script src="{% static '/js/setting-demo.js' %}"></script>
<script src="{% static '/js/demo.js' %}"></script>-->
</body>
</html>
